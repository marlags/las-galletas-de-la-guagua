<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Galletas de la guagua</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#b48bd6">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>

<body>
    <div id="splash">
        <img src="splash.png" alt="Galletas de la guagua">
    </div>

    <div class="app">

        <h1>ğŸª Galletas de la guagua</h1>

        <!-- ===== RECETAS GUARDADAS (PRIMERA SECCIÃ“N) ===== -->
        <div class="card">
            <div class="section-header" onclick="toggleSection('sec-recetas')">
                ğŸ“š Recetas guardadas
                <span>tocar para abrir / cerrar</span>
            </div>
        
            <div id="sec-recetas" class="section-content">
                <div id="listaRecetas"></div>
            </div>
        </div>

        <button id="btnInstalar" class="btn-instalar oculto">
            ğŸ“² Instalar Galletas de la guagua
        </button>


        <!-- ===== SECCIÃ“N 1: INGREDIENTES ===== -->
       <div class="card">
           <div class="section-header" onclick="toggleSection('sec-ingredientes')">
               ğŸ§¾ Ingredientes
               <span>tocar para abrir / cerrar</span>
           </div>

           <div id="sec-ingredientes" class="section-content">

               <p class="ayuda">
                   âœï¸ Ingresa los datos del ingrediente y luego toca â€œAgregar ingredienteâ€.
               </p>

               <label>Nombre del ingrediente</label>
               <input id="ingNombre" placeholder="Ej: Harina">

               <label>Precio del paquete completo (CLP)</label>
               <input id="ingPrecio" type="number" placeholder="Ej: 2.500">

               <label>Contenido del paquete (gramos o ml)</label>
               <input id="ingContenido" type="number" placeholder="Ej: 1000">

               <label>Cantidad usada en esta receta (gramos o ml)</label>
               <input id="ingUsado" type="number" placeholder="Ej: 200">

               <button class="btn-principal" onclick="agregarIngrediente()">
                   â• Agregar ingrediente
               </button>

               <hr>

               <h3>ğŸ“Š Ingredientes agregados</h3>
               <div id="resumenIngredientes"></div>
               <div class="total" id="totalIngredientes"></div>

           </div>
       </div>


        <!-- ===== SECCIÃ“N 2: COSTOS EXTRA ===== -->
        <div class="card">
            <div class="section-header" onclick="toggleSection('sec-costos')">
                ğŸ”¥ Costos extra y trabajo
                <span>tocar para abrir / cerrar</span>
            </div>

            <div id="sec-costos" class="section-content">
                <label>Gas / luz / horno</label>
                <input id="costoGas" type="number">

                <label>Envases, bolsas, cajas</label>
                <input id="costoEnvases" type="number">

                <label>Transporte</label>
                <input id="costoTransporte" type="number">

                <label>Horas trabajadas</label>
                <input id="horasTrabajo" type="number">

                <label>Valor por hora</label>
                <input id="valorHora" type="number">

                <button onclick="calcularCostosExtra()">Calcular costo total</button>

                <div id="resumenTotal"></div>
            </div>
        </div>

        <!-- ===== SECCIÃ“N 3: PRECIO ===== -->
        <div class="card">
            <div class="section-header" onclick="toggleSection('sec-precio')">
                ğŸ’° Precio de venta
                <span>tocar para abrir / cerrar</span>
            </div>

            <div id="sec-precio" class="section-content oculto">
                <label>Unidades producidas</label>
                <input id="unidadesProducidas" type="number">

                <label>Margen de ganancia (%)</label>
                <input id="margenGanancia" type="number" value="50">

                <button onclick="calcularPrecioVenta()">Calcular precio</button>
                <div id="resultadoPrecio" class="alerta"></div>
            </div>
        </div>

        <!-- ===== SECCIÃ“N 4: PACKS ===== -->
        <div class="card">
            <div class="section-header" onclick="toggleSection('sec-packs')">
                ğŸ“¦ Packs
                <span>tocar para abrir / cerrar</span>
            </div>

            <div id="sec-packs" class="section-content oculto">
                <div id="resultadoPacks"></div>
            </div>
        </div>

        <!-- ===== SECCIÃ“N 5: EXPORTAR ===== -->
        <div class="card">
            <div class="section-header" onclick="toggleSection('sec-exportar')">
                ğŸ“¤ Exportar/Importar
                <span>tocar para abrir / cerrar</span>
            </div>

            <div id="sec-exportar" class="section-content oculto">
                <button onclick="exportarImagen()">ğŸ–¼ï¸ Imagen</button>
                <button onclick="exportarPDF()">ğŸ–¨ï¸ PDF</button>
                <button onclick="compartirWhatsApp()">ğŸ“² Compartir por WhatsApp</button>
                <button onclick="exportarRespaldo()">ğŸ›Ÿ Exportar respaldo</button>

                <input type="file" id="importarRespaldo" accept=".json" hidden
                       onchange="importarRespaldo(this.files[0])">
                <button onclick="document.getElementById('importarRespaldo').click()">
                ğŸ“¥ Importar respaldo
                </button>
            </div>
        </div>

    </div>

    <button class="btn-danger" onclick="limpiarTodo()">
        ğŸ§¹ Limpiar toda la receta
    </button>

    <div id="reporte" class="reporte oculto">
        <h1>ğŸª Galletas de la guagua</h1>
        <p class="fecha"></p>
        <h2 class="rep-titulo"></h2>

        <h2>ğŸ§¾ Ingredientes</h2>
        <div class="rep-ingredientes"></div>

        <h2>ğŸ’° Costos</h2>
        <div class="rep-costos"></div>

        <h2>ğŸ“ˆ ProducciÃ³n y precio</h2>
        <div class="rep-precio"></div>

        <h2>ğŸ“¦ Packs sugeridos</h2>
        <div class="rep-packs"></div>
    </div>

    <script src="app.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js');
        }
    </script>


</body>

</html>



