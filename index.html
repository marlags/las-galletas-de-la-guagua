<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Galletas de la guagua</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#b48bd6">

    <link rel="icon" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>

<body>

<!-- ===== SPLASH ===== -->
<div id="splash">
    <img src="splash.png" alt="Galletas de la guagua">
</div>

<div class="app oculto" id="app">

    <h1>ğŸª Galletas de la guagua</h1>

    <!-- ===== RECETAS GUARDADAS ===== -->
    <div class="card">
        <div class="section-header" onclick="toggleSection('sec-recetas')">
            ğŸ“š Recetas guardadas
            <span>tocar para abrir / cerrar</span>
        </div>

        <div id="sec-recetas" class="section-content">
            <div id="listaRecetas"></div>
        </div>
    </div>

    <!-- ===== BOTÃ“N INSTALAR ===== -->
    <button id="btnInstalar" class="btn-instalar oculto">
        ğŸ“² Instalar Galletas de la guagua
    </button>

    <!-- ===== INGREDIENTES ===== -->
    <div class="card">
        <div class="section-header" onclick="toggleSection('sec-ingredientes')">
            ğŸ§¾ Ingredientes
            <span>tocar para abrir / cerrar</span>
        </div>

        <div id="sec-ingredientes" class="section-content">
            <label>Nombre del ingrediente</label>
            <input id="ingNombre">

            <label>Precio paquete completo</label>
            <input id="ingPrecio" type="number">

            <label>Contenido paquete (g / ml)</label>
            <input id="ingContenido" type="number">

            <label>Cantidad usada</label>
            <input id="ingUsado" type="number">

            <button onclick="agregarIngrediente()">â• Agregar ingrediente</button>

            <div id="resumenIngredientes"></div>
            <div class="total" id="totalIngredientes"></div>
        </div>
    </div>

    <!-- ===== COSTOS ===== -->
    <div class="card">
        <div class="section-header" onclick="toggleSection('sec-costos')">
            ğŸ”¥ Costos
            <span>tocar para abrir / cerrar</span>
        </div>

        <div id="sec-costos" class="section-content">
            <input id="costoGas" type="number" placeholder="Gas / luz">
            <input id="costoEnvases" type="number" placeholder="Envases">
            <input id="costoTransporte" type="number" placeholder="Transporte">
            <input id="horasTrabajo" type="number" placeholder="Horas trabajo">
            <input id="valorHoraInput" type="number" placeholder="Valor hora">

            <button onclick="calcularCostosExtra()">Calcular costos</button>
            <div id="resumenTotal"></div>
        </div>
    </div>

    <!-- ===== PRECIO ===== -->
    <div class="card">
        <div class="section-header" onclick="toggleSection('sec-precio')">
            ğŸ’° Precio
            <span>tocar para abrir / cerrar</span>
        </div>

        <div id="sec-precio" class="section-content oculto">
            <input id="unidadesProducidas" type="number" placeholder="Unidades">
            <input id="margenGanancia" type="number" value="50">
            <button onclick="calcularPrecioVenta()">Calcular precio</button>
            <div id="resultadoPrecio"></div>
        </div>
    </div>

    <!-- ===== PACKS ===== -->
    <div class="card">
        <div class="section-header" onclick="toggleSection('sec-packs')">
            ğŸ“¦ Packs
            <span>tocar para abrir / cerrar</span>
        </div>
        <div id="sec-packs" class="section-content oculto">
            <div id="resultadoPacks"></div>
        </div>
    </div>

    <!-- ===== EXPORTAR ===== -->
    <div class="card">
        <div class="section-header" onclick="toggleSection('sec-exportar')">
            ğŸ“¤ Exportar
            <span>tocar para abrir / cerrar</span>
        </div>
        <div id="sec-exportar" class="section-content oculto">
            <button onclick="exportarImagen()">ğŸ–¼ï¸ Imagen</button>
            <button onclick="exportarPDF()">ğŸ–¨ï¸ PDF</button>
        </div>
    </div>

    <button onclick="guardarReceta()">ğŸ’¾ Guardar receta</button>
    <button onclick="limpiarTodo()">ğŸ§¹ Limpiar todo</button>

</div>

<!-- ===== REPORTE ===== -->
<div id="reporte" class="reporte oculto">
    <h1>ğŸª Galletas de la guagua</h1>
    <p class="fecha"></p>
    <h2 class="rep-titulo"></h2>

    <h2>ğŸ§¾ Ingredientes</h2>
    <div class="rep-ingredientes"></div>

    <h2>ğŸ’° Costos</h2>
    <div class="rep-costos"></div>

    <h2>ğŸ“¦ Packs</h2>
    <div class="rep-packs"></div>
</div>

<script src="app.js"></script>

<script>
/* Splash */
window.addEventListener('load', () => {
    setTimeout(() => {
        document.getElementById('splash').style.display = 'none';
        document.getElementById('app').classList.remove('oculto');
    }, 800);
});

/* Service worker */
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js');
}
</script>

</body>
</html>
